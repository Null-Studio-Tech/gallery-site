---
import { getRelativeLocaleUrl } from "astro:i18n";
import navData, { type PageRoutes } from "../data/nav";
import logoBlackImage from "@/assets/images/logo-black.svg";
import logoWhiteImage from "@/assets/images/logo-white.svg";
import LangSwitch from "./LangSwitch.astro";

interface Props {
  theme: "light" | "dark";
  active?: PageRoutes;
}
const locale = Astro.currentLocale as Locales;
const BASE_URL = import.meta.env.BASE_URL;
const HOME_URL = getRelativeLocaleUrl(locale, "/", { normalizeLocale: false });
const { theme, active } = Astro.props;
const defaultAcitve = active;
console.log(defaultAcitve)
const routes = navData.nav.map((nav) => ({
  name: nav[locale],
  path: getRelativeLocaleUrl(locale, nav.path, { normalizeLocale: false }),
  flag: nav.path
}));
---

<div
  class:list={[
    "header w-full flex fixed z-10 justify-between pt-7 pb-5 px-16 mobile:hidden max-w-[calc(1600px+8rem)] left-1/2 -translate-x-1/2",
    { "bg-white": theme === "light" },
  ]}
>
  <a class="logo w-[91px] flex items-center" href={HOME_URL}>
    <img
      class="w-full"
      src={theme === "dark" ? logoWhiteImage.src : logoBlackImage.src}
      alt="logo"
    />
  </a>
  <div class="h-[4.5rem] flex justify-around items-center text-[1rem]">
    {
      routes.map((item) => (
        <a
          class="group relative w-fit min-h-[52px] h-fit ml-9 first:ml-0 flex items-center justify-end"
          href={item.path}
        >
          <div
            class:list={[
              "flex justify-center items-center font=[Roboto] text-lg font-light",
              theme === "dark" ? "text-white" : "text-black",
            ]}
          >
            {item.name}
          </div>
          <div
            class:list={[
              "absolute justify-center items-center right-1/2 translate-x-1/2",
              defaultAcitve === item.flag ? "flex" : "hidden group-hover:flex",
            ]}
          >
            <div
              class:list={[
                "w-[40px] h-[27px] transform animate-mode-forwards",
                {
                  "animate-highlight-small": defaultAcitve !== item.path,
                },
                theme === "dark"
                  ? "bg-highlight-small"
                  : "bg-dark-active-small",
              ]}
            />
          </div>
        </a>
      ))
    }
    <LangSwitch theme={theme} />
  </div>
</div>

---
import { getCollection } from "astro:content";
import PageLayout from "../../../layouts/PageLayout.astro";
import { Debug } from "astro:components";

const BASE_URL = import.meta.env.BASE_URL;

const pageCollections = await getCollection("personal", ({ id }) =>
  /^zh-CN/.test(id),
);
const persionalList = pageCollections.map((p) => ({
  ...p.data.meta,
  slug: p.id,
  collection: p.collection,
}));
---

<PageLayout title="Null Studio Gallery" active="personal">
  <div class="pt-[15rem] mobile:pt-[6.25rem]">
    <div class="hidden mobile:block text-[40px] leading-none mb-7">
      Personal Works
    </div>
    {
      persionalList.map((item) => (
        <div class="grid gap-2 grid-cols-12 mb-9 mobile:mb-0 last:mb-0 mobile:flex-col-reverse mobile:flex mobile:justify-end">
          <a
            class="group col-span-5 relative min-w-[96px] w-fit min-h-[58px] mobile:min-h-[48px] mobile:mt-2 h-fit flex-1 pr-6"
            href={`${BASE_URL}${item.collection}/${item.slug}`}
          >
            <div class="text-xl font-[Roboto-ExtraLight]">{item.title}</div>
            <div class="max-w-[100%] whitespace-pre-wrap mobile:hidden">
              {item.description}
            </div>
            <div class="hidden cursor-pointer group-hover:flex absolute inset-0 items-center mobile:!hidden">
              <div class="w-[96px] h-[58px] transform animate-mode-forwards animate-highlight-normal bg-dark-active-normal" />
            </div>
          </a>
          <a href={`${BASE_URL}detail`} class="col-span-7">
            <img src={item.cover} alt={item.cover} />
          </a>
        </div>
      ))
    }
  </div>
</PageLayout>
<style>
  .bg-dark-active-normal {
    background-position: -1700px;
    background-size: 1800px auto;
  }
</style>

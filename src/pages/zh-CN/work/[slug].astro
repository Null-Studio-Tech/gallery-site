---
import type { GetStaticPaths } from "astro";
import { getCollection, getEntry } from "astro:content";
import PageLayout from "../../../layouts/PageLayout.astro";
import { Debug } from "astro:components";

const BASE_URL = import.meta.env.BASE_URL;

export const getStaticPaths = (async () => {
  const pageCollections = await getCollection("work");
  return pageCollections
    .map((p) => {
      const [lang, ...slug] = p.id.split("/");
      return {
        params: {
          slug: slug.join("/"),
        },
        props: {
          id: p.id,
          lang: lang,
          collection: p.collection,
        },
      };
    })
    .filter((v) => v.props.lang === "zh-CN");
}) satisfies GetStaticPaths;

const props = Astro.props;
const page = await getEntry("work", props.id);
---

<PageLayout title="Null Studio Gallery">
  <div class="pt-[8.75rem] grid grid-cols-12 gap-x-2">
    <!-- {
      templates.map((Item) => (
        <Item.widget content={Item.content} description={Item.description} className={Item.className} src={Item.src}>
        </Item.widget>
      ))
    } -->
  </div>
  <Debug {props} />
  <Debug {page} />
</PageLayout>
